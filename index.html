<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tic Tac Toe vs PC</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 40px;
    }
    h1 { color: #333; }
    #board {
      display: grid;
      grid-template-columns: repeat(3, 80px);
      grid-gap: 10px;
      margin: 20px 0;
    }
    .cell {
      width: 80px;
      height: 80px;
      background: #fff;
      border: 2px solid #333;
      font-size: 2.5em;
      color: #333;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.2s;
    }
    .cell:hover { background: #e2f0fa; }
    #message {
      margin: 15px 0;
      font-size: 1.2em;
      color: #024d3f;
    }
    button {
      padding: 10px 24px;
      font-size: 1em;
      background: #088;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 5px;
    }
    button:hover { background: #055; }
  </style>
</head>
<body>
  <h1>Tic Tac Toe vs PC</h1>
  <div id="message">Your turn! You are <b>X</b>.</div>
  <div id="board"></div>
  <button onclick="resetGame()">Restart</button>
  <script>
    let board, isGameOver;

    function emptyBoard() { return Array(9).fill(''); }

    function drawBoard() {
      const boardDiv = document.getElementById('board');
      boardDiv.innerHTML = '';
      for (let i = 0; i < 9; i++) {
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.textContent = board[i];
        cell.onclick = () => playerMove(i);
        boardDiv.appendChild(cell);
      }
    }

    function playerMove(index) {
      if (isGameOver || board[index]) return;
      board[index] = 'X';
      drawBoard();
      if (checkWinner('X')) return endGame('You win!');
      if (checkDraw()) return endGame("It's a draw!");
      setMessage("PC's turn...");
      setTimeout(computerMove, 500);
    }

    function computerMove() {
      // 1. Win if possible
      for (let i = 0; i < 9; i++) {
        if (!board[i]) {
          board[i] = 'O';
          if (checkWinner('O')) {
            drawBoard();
            return endGame('PC wins!');
          }
          board[i] = '';
        }
      }
      // 2. Block player
      for (let i = 0; i < 9; i++) {
        if (!board[i]) {
          board[i] = 'X';
          if (checkWinner('X')) {
            board[i] = 'O';
            drawBoard();
            if (checkWinner('O')) return endGame('PC wins!');
            if (checkDraw()) return endGame("It's a draw!");
            setMessage('Your turn!');
            return;
          }
          board[i] = '';
        }
      }
      // 3. Random move
      let empties = board.map((v, i)=>v ? null : i).filter(i=>i!==null);
      if (empties.length) {
        let move = empties[Math.floor(Math.random()*empties.length)];
        board[move] = 'O';
        drawBoard();
        if (checkWinner('O')) return endGame('PC wins!');
        if (checkDraw()) return endGame("It's a draw!");
        setMessage('Your turn!');
      }
    }

    function checkWinner(player) {
      const winPatterns = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];
      return winPatterns.some(p => p.every(i=>board[i]===player));
    }

    function checkDraw() {
      return board.every(cell => cell) && !checkWinner('X') && !checkWinner('O');
    }

    function endGame(msg) {
      setMessage(msg);
      isGameOver = true;
    }

    function setMessage(msg) {
      document.getElementById('message').innerHTML = msg;
    }

    function resetGame() {
      board = emptyBoard();
      isGameOver = false;
      drawBoard();
      setMessage('Your turn! You are <b>X</b>.');
    }

    // Start
    resetGame();
  </script>
</body>
</html>

